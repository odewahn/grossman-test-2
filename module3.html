<section data-type="chapter">
<h1>Module 3 - Deciding what to do next.&nbsp;</h1>

<div data-nickname="petrycki" data-type="comment">
<div class="comment-identifier" contenteditable="false"><img src="https://secure.gravatar.com/avatar/d4945bdcb61d40753a9fc1142633ff9e" />
<div spellcheck="false">petrycki</div>
<i class="delete_comment glyphicons remove_2">&nbsp;</i></div>

<p>I've always hated &quot;user.&quot; I remember David Pogue saying only two industries call their customers &quot;users:&quot; software developers and drug dealers. ;-) We can find better more conversational ways to talk about the person trying out our blackjack game. I made some suggestions.</p>
</div>

<p>At this point, our blackjack player&nbsp;has been asked if they want to play and whether he&nbsp;responded. We now need to check and see if what that person wants to do.&nbsp;</p>

<p>The&nbsp;<strong>puts&nbsp;</strong>&nbsp;statement outputs the question &quot;do you want to play?&quot;. &nbsp;The&nbsp;<strong>gets&nbsp;</strong>statement obtains the answer ('y' for yes and 'q' for quit). &nbsp;</p>

<p>Our new statement:&nbsp; the&nbsp;<strong>if-then</strong>&nbsp;statement will contain a comparison of a value to a variable.&nbsp; The comparison will either return <strong>true </strong>or <strong>false</strong>.&nbsp;</p>

<div data-nickname="petrycki" data-type="comment">
<div class="comment-identifier" contenteditable="false"><img src="https://secure.gravatar.com/avatar/d4945bdcb61d40753a9fc1142633ff9e" />
<div spellcheck="false">petrycki</div>
<i class="delete_comment glyphicons remove_2">&nbsp;</i></div>

<p>Let's rethink passive voice. The active version sounds much better to me.&nbsp;</p>

<p>Our new statement:&nbsp; the&nbsp;<strong>if-then</strong>&nbsp;statement&nbsp;contains&nbsp;a comparison of a value to a variable.&nbsp; The comparison either returns&nbsp;<strong>true&nbsp;</strong>or&nbsp;<strong>false</strong>.&nbsp;</p>
</div>

<p>Up to now, a program just executed each step one after the other starting at the top and going to the bottom. &nbsp;Think of it like a recipe.&nbsp;</p>

<p>Obtain ingredients for making&nbsp;chocolate chip cookies that come with a mix where you need to add oil and eggs.&nbsp;</p>

<ol>
	<li>Break eggs and put eggs into mixing bowl</li>
	<li>measure oil and pour into mixing bowl</li>
	<li>pour cookie mix into mixing bowl</li>
	<li>mix the contents</li>
	<li>scoop contents into cookie sheet, one cookie at a time</li>
	<li>put sheet into oven</li>
	<li>bake</li>
	<li>remove cookies</li>
	<li>eat cookies</li>
</ol>

<p>Each step happens one after the other. &nbsp;Now imagine if we wanted to ask if someone wanted to make the cookies. &nbsp;So we would have a&nbsp;<strong>puts&nbsp;</strong>statement to ask the question and a&nbsp;<strong>gets&nbsp;</strong>statement to obtain the answer. &nbsp;</p>

<p>We need an&nbsp;<strong>if-then</strong>&nbsp;statement to find out if the user wants to make cookies and if so, go ahead and make them. &nbsp;Otherwise we can just display a message that says &quot;Fine, forget about the cookies and instead&nbsp;head to the bakery.&quot;&nbsp;</p>

<div data-nickname="petrycki" data-type="comment">
<div class="comment-identifier" contenteditable="false"><img src="https://secure.gravatar.com/avatar/d4945bdcb61d40753a9fc1142633ff9e" />
<div spellcheck="false">petrycki</div>
<i class="delete_comment glyphicons remove_2">&nbsp;</i></div>

<p>Added an else condition. That said, do you want to&nbsp;hipper examples, such as something a 20-something guy might want to do? Ask someone on a date? Play a video game? Movie?</p>
</div>

<p>The structure of an&nbsp;<strong>if-then</strong>&nbsp;statement in Ruby is:</p>

<p><strong>if</strong> (comparison of a variable to a value) &nbsp;<strong>then</strong></p>

<p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; statements to do if the comparison is true</p>

<p>&nbsp;</p>

<p><strong>else</strong></p>

<p>&nbsp; &nbsp; &nbsp;statements to do if the comparison is false</p>

<p><strong>end</strong></p>

<p>&nbsp;</p>

<p>If the comparison is true, the statements after the&nbsp;<strong>then&nbsp;</strong>&nbsp;get executed, if it is false, the statements in the true part are skipped and only the statements after the&nbsp;<strong>else&nbsp;</strong>are executed.&nbsp;&nbsp;&nbsp;<strong> </strong>Ruby allows you to do the following types of comparisons:&nbsp;&nbsp; equal, not equal, less then,&nbsp; greater than and many others.&nbsp; For an full discussion of the <strong>if-then-else </strong>statement click <a href="http://herehttps://atlas.oreilly.com/oreillymedia/computer-science-programming-basics-in-ruby-course/editor/master/ch04.html">here.</a></p>

<p>In our current case we simply have to find out if the user wishes to make cookies so we would say</p>

<p>&nbsp;</p>

<pre class="pre " data-type="programlisting">
puts &quot;Want to make cookies&quot;
x = gets.chop
if (x == &quot;yes&quot;) then
&nbsp; &nbsp; all the making cookie statements go here
else
&nbsp; &nbsp; puts &quot;its OK if you do not wish to make cookies.&quot;
end




</pre>

<p>The simplest comparison is one that checks to see if a variable equals a particular value.&nbsp; The comparison operator in Ruby is two equal signs next to one another (==). &nbsp; The reason a comparison is two equal signs is that one equal sign is already taken by the assignment operator. &nbsp; If you remember the <strong>gets </strong>statement in which we assigned the result of the <strong>gets </strong>to the variable <strong>x </strong>with the statement:</p>

<pre data-type="programlisting">
x = gets</pre>

<p>Here, a single equal sign means to assign the result of the gets to the value of <strong>x.&nbsp; </strong></p>

<p><br />
Try the following:</p>

<pre data-type="programlisting">
puts &quot;Ready to Deal (y = yes, q = quit)&quot;
input = gets.chop

if&nbsp; (input == 'y') then
&nbsp;&nbsp;&nbsp; puts &quot;OK lets play.&quot;
else
&nbsp;&nbsp;&nbsp; puts &quot;Fine we will play again another time.&quot;
end
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


</pre>

<p>Line 3 will be true if the user enters a &quot;y&quot; and if it is true then line 4 is executed. If the user enters something other than a &quot;y&quot; then line 6 is executed.&nbsp;&nbsp; Try it for both cases.</p>

<p>Line 3 really has the new thing for this module which is our&nbsp;<strong>if-then&nbsp;</strong>statement. &nbsp;We test the condition if&nbsp;<em>(input == 'y') . &nbsp;</em>This compares the variable named&nbsp;<em>input&nbsp;</em>&nbsp;which is populated in line two with the value 'y'. &nbsp;'y' is in quotes so we are making it clear that we are comparing to the character 'y' and not a variable named 'y'. &nbsp;The two equal signs are critical (instead of one).&nbsp;</p>

<p>Once you get the example above working, lets mess it up with a classic mistake.&nbsp; Lets leave out an equal sign.&nbsp;</p>

<pre data-type="programlisting">
puts &quot;Ready to Deal (y = yes, q = quit)&quot;
input = gets.chop
if&nbsp; (input = 'y') then
&nbsp;&nbsp;&nbsp; puts &quot;OK lets play.&quot;
else
&nbsp;&nbsp;&nbsp; puts &quot;Fine we will play again another time.&quot;
end
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</pre>

<p>Try it.&nbsp; Unfortunately, the condition no longer works properly.&nbsp; You can enter 'y' or 'n' or 'anything' and the &quot;OK lets play&quot; message will always be displayed.&nbsp;&nbsp; The reason is that the single equal sign was used to simply assign the value 'y' to the variable <strong>input</strong> since the single equal sign (=) assignment operator was used and not the symbol for a comparison.&nbsp;&nbsp;</p>

<p>The following statement is valid Ruby syntax.&nbsp; It contain an assignment followed by a comparison.&nbsp; The assignment is done with the equal sign and the comparison is done the greater than (&gt;) symbol.&nbsp;</p>

<pre data-type="programlisting">
if ((x = 5) &gt; 7) then puts &quot;x is big&quot;
</pre>

<p>This statement will assign 5 to x and then compare it with 7.&nbsp; We do not recommend doing this as it can be confusing to read.&nbsp; Instead just break it into two statements:</p>

<pre data-type="programlisting">
x = 5
if (x &gt; 7) then puts &quot;x is big&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</pre>

<p>However, since Ruby allows you to assign a variable and then compare it in :the statement, the following statement will simply execute an assignment of moving 'y' to the variable <strong>input. </strong></p>

<pre data-type="programlisting">
if (input = 'y')</pre>

<p>Again, this will simply assign 'y' to input and not COMPARE 'y' to input.&nbsp; Once it is assigned, Ruby sees no harm in having the expression evaluate to TRUE as no comparison exists, so it may as well be true.&nbsp; Hence, the if statement will now be TRUE in all cases.&nbsp; Adding the double equal sign as in</p>

<pre data-type="programlisting">
if (input == 'y')</pre>

<p>will tell the Ruby interpreter that we wish to compare 'y' to input and the evaluate to TRUE or FALSE based on the comparison -- no assignment is being made.&nbsp; The problem occurs because assignments are allowed in the condition being compared and the equal sign (single =) is the assignment operator and the double equal sign (==) is the comparison operator.&nbsp;</p>

<p>The hard part about this example is that everything appears to work well -- it is only when you try different input that you identify the problem.&nbsp; The good news is that the Ruby interpreter does give you a warning:&nbsp;</p>

<p><strong>warning: found = in conditional, should be ==</strong></p>

<p>That is a nice hint, you do not always get such good hints, so please remember to use a double equal sign (==) for the condition inside of an <strong>IF </strong>statement.</p>

<p>Now, try one more error that is easier. Go ahead and misspell&nbsp; the ELSE (may as well get used to this type of error as every programmer has done it a few zillion times).&nbsp;</p>

<pre data-type="programlisting">
puts &quot;Ready to Deal (y = yes, q = quit)&quot;
input = gets.chop

if&nbsp; (input = 'y') then
&nbsp;&nbsp;&nbsp; puts &quot;OK lets play.&quot;
esle
&nbsp;&nbsp;&nbsp; puts &quot;Fine we will play again another time.&quot;
end
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</pre>

<p>&nbsp;</p>

<p>We have just interchanged the 'l' and the 's' in <strong>else.&nbsp; </strong></p>

<p>When we try this we get:</p>

<p><strong>in ` ': undefined local variable or method `esle' for main:Object (NameError)</strong></p>

<p>The ruby interpreter thinks we are now referring to a variable called <strong>esle</strong> and says that variable has not been defined.&nbsp; Now spell else correctly, use a double equal (==) and try it again.</p>

<p>To run the whole game of blackjack we will need the following IF statement:</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<pre data-type="programlisting">
&nbsp; &nbsp; 
&nbsp;   puts &nbsp; &quot;Ready to Deal (y = yes, q = quit)&quot;
&nbsp; &nbsp; input = gets.chop
&nbsp; &nbsp; if &nbsp;(input == 'y') then
&nbsp;      deck = Deck.new
&nbsp; &nbsp; &nbsp; &nbsp;player = Player.new(deck)
&nbsp; &nbsp; &nbsp; &nbsp;dealer = Dealer.new(deck)
&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;# now draw until stick
&nbsp; &nbsp; &nbsp; &nbsp;player.draw_remaining_cards

       if (player.is_not_busted?)
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dealer.draw_remaining_cards
&nbsp; &nbsp; &nbsp; &nbsp;end

      &nbsp;puts &quot;Player: &quot; + player.score &quot;Dealer: &quot; + dealer.score
&nbsp; &nbsp; &nbsp; &nbsp;if player.score &gt; dealer.score&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; puts &quot;Congratulations! You won.&quot;
&nbsp; &nbsp; &nbsp; &nbsp;else
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; puts &quot;Sorry you lost.&quot;
&nbsp; &nbsp; &nbsp; &nbsp;end
&nbsp; &nbsp; else
&nbsp; &nbsp; &nbsp; &nbsp;puts &quot;Sorry you didn't want to play.&quot;&nbsp;
&nbsp; &nbsp; end
end

puts &quot;Have a good day.&quot;


</pre>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line one is our friendly message to the user.&nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line two is where we get the response and chop off the newline with a &quot;\n&quot;.&nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Now we get to our new thing for this module which is our&nbsp;<strong>if-then&nbsp;</strong>statement. &nbsp;We test te condition if&nbsp;<em>(input == 'y') . &nbsp;</em>This compares the variable named&nbsp;<em>input&nbsp;</em>&nbsp;which was populated in line two with the value 'y'. &nbsp;'y' is in quotes so we are making it clear taht we are comparing to the character 'y' and not a variable named 'y'. &nbsp;The two equal signs are critical (instead of one which is a common error made every day by very experienced programmers) as they indicate that a comparison is to be made. &nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line 3-12 are the core of the black jack game. &nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line 4 initializes a deck of cards. &nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line 5 initializes a player.&nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line 6 initializes a dealer.&nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line 7 has the player keep drawing cards until they elect to choose no more cards (e.gl; they decide to stick with their hand).&nbsp;</span></p>

<p><span style="font-family: Georgia, serif; font-size: 17px; line-height: 1.5em;">Line 8 has another if statement to see if the player has busted (gone over 21) or not. &nbsp;If the player has not busted then the dealer needs some cards which is handled by the method <strong>draw_remaining_cards </strong>in Line 9.&nbsp; A method is a sequence of steps that are defined separately.&nbsp; Imagine if we had a <strong>make_cookies</strong> method that had our numbered steps&nbsp; </span>from before -- then instead of repeating those 9 steps every time we wanted to have the program make cookies, we would just say <strong>make_cookies.&nbsp; </strong>Similarly, the steps to draw remaining cards have been stored in a <strong>method </strong>called <strong>draw_remaining_cards. </strong></p>

<p>Next after dealing the dealer cards we check the player total and compare to the dealer total in line 17. Notice the (&gt;) or greater than sign used in this comparison to see if the player has a higher total than the dealer. &nbsp;If the player does have a higher total the player wins, otherwise the dealer wins.&nbsp;</p>

<p>One thing we didn't emphasize is that an IF statement can have another IF statement in the middle of it.&nbsp;&nbsp; Notice that we have one IF statement in line 3 that checks to see the users input and then if the user did want to play blackjack we then execute the ruby commands in lines 4-20, otherwise we execute the ruby commands after the <strong>ELSE </strong>which is in line 22 and 23.</p>

<p>Do not try typing this in yet as we have not defined all the methods.&nbsp; In the coming modules we will define and test each method and then we will come back and put in this code (lines 1-24) and the whole game will be done.</p>

<p>For now, just to give you the feel of an if statement, enter the following:</p>

<pre data-type="programlisting">
puts &quot;Ready to Deal (y = yes, q = quit)&quot;
input = gets.chop

if&nbsp; (input == 'y') then
&nbsp;&nbsp;&nbsp; puts &quot;OK lets play.&quot;
else
&nbsp;&nbsp;&nbsp; puts &quot;Fine we will play again another time.&quot;
end
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


</pre>

<p>Another thing to mention is that in this module we have basically described all the components needed to play Blackjack and the statements in line 4-20 are what is called the <strong>main driver</strong> of this program.&nbsp; These statements call other methods to get things done but the high level steps are all here.&nbsp;&nbsp; Essentially, if we were writing our &quot;bake cookies&quot; steps we would have:</p>

<p>See if User wants to Play</p>

<ol>
	<li>If user wishes to play THEN</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Initialize a Player</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Initialize a Dealer</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Draw all the cards for the Player</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp; If player_score is less then 21 then</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Draw all the cards for the dealer</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp; If the player has a higher score than the dealer</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Output &quot;Player Wins&quot;</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp; Else</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Output &quot;Dealer Wins&quot;</li>
	<li>&nbsp;&nbsp;&nbsp;&nbsp; end</li>
	<li>End</li>
</ol>

<p>&nbsp;</p>

<p>The steps 1-12 we have just listed here are called psuedocode as they are mostly in English and not meant to be specific to any programming language.&nbsp; This step by step listing of how to solve a problem (e.g.; the problem here is to make the computer play blackjack) is called an <strong>algorithm </strong>(pronounced ALG-OH-rhythm).&nbsp;&nbsp; The study of Computer Science is really all about the study of algorithms.&nbsp; For any algorithm you can always compute how many steps the computer will take.&nbsp; A big part of Computer Science is finding more efficient algorithms to solve the same problem.&nbsp; For some problems, a faster algorithm can be shown to do more good and make the problem go away thousands of times faster than buying a much more expensive and faster computer.&nbsp;</p>

<p>People tend to focus on learning a programming language, but Computer Science doesn't get all wrapped up in a particular programming language.&nbsp; Programming languages come and programming languages go -- but good algorithms prevail. &nbsp; We think Ruby is a good programming language to teach algorithm development as much of Ruby reads a good bit like pseudocode, but you should always remember that a good program really should only be written once you have a good algorithm. &nbsp;&nbsp; Hence, the first thing you should do before typing in a program is to write out the algorithm in pseudocode and make sure you have thought threw all the different things that can happen.&nbsp; For instance, if our algorithm left out step 10, then we would end up with no output i the dealer wins and the program would only work when the player wins. &nbsp; So check your algorithm and make sure you have thought about the different things that can happen.&nbsp; Then implement your algorithm with a programming language and then test the software that implements the algorithm. &nbsp; For more on algorithms and pseudocode click</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
</section>
